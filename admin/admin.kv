<FlatButton@ButtonBehavior+Label>:
    text: 'default'
    canvas.before:
        Color:
            rgba: (0, 0.306, 0.561, 1)
        Rectangle:
            size: self.size
            pos: self.pos
<AdminWindow>:
    id: main_win
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Rectangle:
            size: self.size
            pos: self.pos
    
    BoxLayout:
        id: top_nav
        size_hint_y: None
        height: 30
        canvas.before:
            Color:
                rgba: (0.145, 0.376, 0.541, 1)
            Rectangle:
                size: self.size
                pos: self.pos
            
        Label:
            text: 'PRONTO IT'
            bold: True
            size_hint: (.9, None)
            height: 30
            canvas.before:
                Color:
                    rgba: (0, 0.306, 0.561, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
        FlatButton:
            id: loggedin_user
            text: ''
            color: (1,1,1,1)
            underline: True
            on_release: root.logout()
            size_hint: (.2, None)
            height: 30
    BoxLayout:
        id: content_nav

        BoxLayout:
            id:nav_tabs
            size_hint_x: .1
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: (0.145, 0.376, 0.541, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            ToggleButton:
                id: user_toggle
                text: "Utilisateurs"
                size_hint_y:.1
                state: 'down'
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Inventaire"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                group: 'admin_navs'
                on_state: root.change_screen(self)
            ToggleButton:
                id: products_toggle
                text: "Recherche"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                group: 'admin_navs'
                on_state: root.change_screen(self)
            ToggleButton:
                id: products_toggle
                text: "Commandes"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Fournisseurs"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Charges"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Transactions"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Clients"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                on_state: root.change_screen(self)
                group: 'admin_navs'
            ToggleButton:
                id: products_toggle
                text: "Calculateur"
                size_hint_y:.1
                background_color: (0.145, 0.376, 0.541, 1)
                background_normal: ''
                group: 'admin_navs'
                on_state: root.change_screen(self)
            
            Label:
                id: sp
                text: ''
                size_hint_y: .4
            
        BoxLayout:
            id: all_content
            size_hint_x: .8
            padding: (10,10)
            ScreenManager:
                id: scrn_mngr
                Screen:
                    id: scrn_content
                    name:  'scrn_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        BoxLayout:
                            id: scrn_contents
                        BoxLayout:
                            id: ops_fields
                            spacing: 10
                            size_hint_y: None
                            height: 35
                        BoxLayout:
                            id: ops_btns
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            Button:
                                id: crud_add
                                text: "Ajouter Utilisateur"
                                on_release: root.add_user_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_update
                                text:  'Modifier Utilisateur'
                                on_release: root.update_user_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_remove
                                text:  'Supprimer Utilisateur'
                                on_release: root.remove_user_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: scrn_product_content
                    name:  'scrn_product_content'
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 10
                        GridLayout:
                            id: scrn_product_stats
                            cols: 6
                            size_hint_y: None
                            height: 40
                            spacing: 10
                        BoxLayout:
                            id: scrn_product_contents
                        GridLayout:
                            id: ops_fields_p
                            cols: 10
                            spacing: 5
                            size_hint_y: None
                            height: 70
                        BoxLayout:
                            id: ops_btns_p
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            Button:
                                id: crud_add_p
                                text: "Ajouter Produit"
                                on_release: root.add_product_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_update_p
                                text:  'Modifier Produit'
                                on_release: root.update_product_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_retour_p
                                text:  'Retourner Produit'
                                on_release: root.return_product_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_remove_p
                                text:  'Supprimer Produit'
                                on_release: root.remove_product_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_export_bulk
                                text: "Imprimer Ticket"
                                on_release: root.add_print_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_export_bulk
                                text: "Exporter Excel"
                                on_release: root.export_excel_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: crud_add_bulk
                                text: "Importer Excel"
                                on_release: root.import_xlsx()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: content
                    name:  'scrn_order_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        GridLayout:
                            id: scrn_order_stats
                            cols: 6
                            size_hint_y: None
                            height: 40
                            spacing: 10
                        BoxLayout:
                            id: scrn_order_contents
                        BoxLayout:
                            id: ops_btns_o
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            TextInput:
                                id: order_id
                                hint_text: "Réference de commande"
                                multiline: False
                            Button:
                                id: search_b
                                text: "Rechercher"
                                on_release: root.get_order()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: export_order_all
                                text: "Exporter Tous Les Produits"
                                on_release: root.export_order_xlsx()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''

                            Button:
                                id: export_order_stock
                                text: "Exporter Les Produits En Stock"
                                on_release: root.export_order_xlsx(True)
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''

                            Button:
                                id: print_order_labels
                                text: "Imprimer les Tickets"
                                on_release: root.create_order_labels(order_id.text)
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: content
                    name:  'scrn_supplier_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        GridLayout:
                            id: scrn_supplier_stats
                            cols: 6
                            size_hint_y: None
                            height: 40
                            spacing: 10
                            padding:(10,5)
                        BoxLayout:
                            id: scrn_supplier_contents
                        BoxLayout:
                            id: ops_btns_supplier
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            TextInput:
                                id: supplier_id
                                hint_text: "Réference de fournisseur"
                                multiline: False
                            Button:
                                id: search_b_s
                                text: "Rechercher"
                                on_release: root.get_supp()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: export_all_b_s
                                text: "Exporter Tous Les Produits"
                                on_release: root.export_supp_xlsx()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: export_stock_b_s
                                text: "Exporter Les Produits En Stock"
                                on_release: root.export_supp_xlsx(True)
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: content
                    name:  'scrn_calc_content'
                    BoxLayout:
                        id: "calc"
                        orientation: "vertical"
                        spacing: 5
                        Label:
                            text: "Calculateur de prix:"
                            bold: True
                            color: (0, 0, 0, 0.5)
                            size_hint_y: None
                            height: 40
                            text_size: self.size
                            padding: (0, 10)
                        TextInput:
                            hint_text: "Prix D'achat"
                            id: purchase_price_calc
                            multiline: False
                            size_hint_y: None
                            height: 40
                            size_hint_x: .5
                            on_text_validate: transport_calc.focus = True
                        TextInput:
                            hint_text: "Transport"
                            id: transport_calc
                            multiline: False
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                            on_text_validate: douane_calc.focus = True
                        TextInput:
                            hint_text: "Douane"
                            id: douane_calc
                            multiline: False
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                            on_text_validate: transitaire_calc.focus = True
                        TextInput:
                            hint_text: "Frais de Transitaire"
                            id: transitaire_calc
                            multiline: False
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                            on_text_validate: autres_calc.focus = True
                        TextInput:
                            hint_text: "Autres"
                            id: autres_calc
                            multiline: False
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                            on_text_validate: nbr_prdct_calc.focus = True
                        TextInput:
                            hint_text: "Nombre des Produits"
                            id: nbr_prdct_calc
                            multiline: False
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                        BoxLayout:
                            orientation: "horizontal"
                            spacing: 10
                            size_hint_y: None
                            size_hint_x: .5
                            height: 40
                            Button:
                                id: calculate_button
                                text: "Calculer"
                                on_release: root.calculate_price()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                                size_hint_y: None
                                size_hint_x: .2
                                height: 40
                            Button:
                                id: clear_calc_button
                                text: "Effacer"
                                on_release: root.clear_calc()
                                background_color: (0.184, 0.216, 0.231)
                                background_normal: ''
                                size_hint_y: None
                                size_hint_x: .1
                                height: 40
                        Label:
                            id: result_calc
                            text: "Résultat: "
                            bold: True
                            color: (0, 0, 0, 0.5)
                            size_hint_y: None
                            height: 40
                            text_size: self.size
                            padding: (0, 10)
                        BoxLayout:
                            orientation: "vertical"
                Screen:
                    id: content
                    name:  'scrn_search_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        BoxLayout:
                            id: scrn_search_contents
                        BoxLayout:
                            id: ops_btns_s
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            TextInput:
                                id: prod_id
                                hint_text: "Réference de produit"
                                multiline: False
                            Button:
                                id: search_b_s
                                text: "Rechercher"
                                on_release: root.get_product()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: print_prod_label
                                text: "Imprimer le Ticket"
                                on_release: root.create_label(prod_id.text)
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: scrn_charges_content
                    name:  'scrn_charges_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        GridLayout:
                            id: scrn_charges_stats
                            cols: 6
                            size_hint_y: None
                            height: 40
                            spacing: 10
                        BoxLayout:
                            id: scrn_charges_contents
                        BoxLayout:
                            id: charges_ops_fields
                            spacing: 10
                            size_hint_y: None
                            height: 35
                        BoxLayout:
                            id: charges_ops_btns
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            Button:
                                id: charges_crud_add
                                text: "Recherche"
                                on_release: root.search_charge_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: charges_crud_add
                                text: "Ajouter Charge"
                                on_release: root.add_charge_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: charges_crud_update
                                text:  'Modifier Charge'
                                on_release: root.update_charge_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: charges_crud_remove
                                text:  'Supprimer Charge'
                                on_release: root.remove_charge_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: charges_crud_remove
                                text:  'Exporter Charges'
                                on_release: root.export_charge_xlsx()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                
                Screen:
                    id: scrn_transaction_content
                    name:  'scrn_transaction_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        GridLayout:
                            id: scrn_transaction_stats
                            cols: 6
                            size_hint_y: None
                            height: 40
                            spacing: 10
                            Label:
                                text: "TESSSSST"
                        BoxLayout:
                            id: scrn_transaction_contents
                        BoxLayout:
                            id: transaction_ops_fields
                            spacing: 10
                            size_hint_y: None
                            height: 35
                        BoxLayout:
                            id: transaction_ops_btns
                            spacing: 10
                            size_hint_y: None
                            height: 45
                            TextInput:
                                id: tr_id_inp
                                multiline: False
                                hint_text: "Ref"
                            Button:
                                id: transaction_crud_add
                                text: "Recherche"
                                on_release: root.search_transaction_fields()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: transaction_crud_add
                                text: "Ouvrir la facture"
                                on_release: root.open_invoice()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: transaction_crud_update
                                text:  'Ouvrir le reçu'
                                on_release: root.open_reciept()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                            Button:
                                id: transaction_crud_remove
                                text:  'Exporter Les Transactions'
                                on_release: root.export_transactions_xlsx()
                                background_color: (0.145, 0.376, 0.541, 1)
                                background_normal: ''
                Screen:
                    id: scrn_clients_content
                    name:  'scrn_clients_content'
                    BoxLayout:
                        orientation:  "vertical"
                        spacing: 10
                        BoxLayout:
                            id: scrn_clients_contents
                        BoxLayout:
                            id: clients_ops_fields
                            spacing: 10
                            size_hint_y: None
                            height: 35
                        #BoxLayout:
                        #    id: clients_ops_btns
                        #    spacing: 10
                        #    size_hint_y: None
                        #    height: 45
                        #    Button:
                        #        id: clients_crud_add
                        #        text: "Ajouter Charge"
                        #        on_release: root.add_charge_fields()
                        #        background_color: (0.145, 0.376, 0.541, 1)
                        #        background_normal: ''
                        #    Button:
                        #        id: clients_crud_update
                        #        text:  'Modifier Charge'
                        #        on_release: root.update_charge_fields()
                        #        background_color: (0.145, 0.376, 0.541, 1)
                        #        background_normal: ''
                        #    Button:
                        #        id: clients_crud_remove
                        #        text:  'Supprimer Charge'
                        #        on_release: root.remove_charge_fields()
                        #        background_color: (0.145, 0.376, 0.541, 1)
                        #        background_normal: ''
                        #    Button:
                        #        id: clients_crud_remove
                        #        text:  'Exporter Charges'
                        #        on_release: root.export_charge_xlsx()
                        #        background_color: (0.145, 0.376, 0.541, 1)
                        #        background_normal: ''